image: golang:1.23-alpine

stages:
  - build

before_script:
  - apk add --no-cache git
  - go env -w GO111MODULE=on
  - go env -w GOPRIVATE=github.com/PecozQ/*
  - git config --global url."git@github.com:".insteadof "https://github.com/"

build:
  stage: build
  script:
    - echo "Listing project files..."
    - ls -la
    - echo "Navigating to applications/identity..."
    - cd applications/identity || { echo "Directory not found!"; exit 1; }
    - echo "Running go mod tidy..."
    - go mod tidy
    - echo "Running go build..."
    - go build ./...
    - echo "Build completed."
